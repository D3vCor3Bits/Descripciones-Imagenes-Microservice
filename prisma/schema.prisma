generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model DESCRIPCION {
  idDescripcion Int       @id @default(autoincrement())
  texto         String
  fecha         DateTime  @default(now()) @db.Timestamptz(6)
  idImagen      Int
  idPaciente    Int
  idSesion      Int
  IMAGEN        IMAGEN    @relation(fields: [idImagen], references: [idImagen], onDelete: Cascade, onUpdate: NoAction)
  SESION        SESION    @relation(fields: [idSesion], references: [idSesion], onDelete: Cascade, onUpdate: NoAction)
  PUNTAJE       PUNTAJE[]
}

model GROUNDTRUTH {
  idGroundtruth Int      @id @default(autoincrement())
  texto         String
  fecha         DateTime @default(now()) @db.Timestamptz(6)
  idCuidador    Int
  idImagen      Int
  IMAGEN        IMAGEN   @relation(fields: [idImagen], references: [idImagen], onDelete: Cascade, onUpdate: NoAction)
}

model IMAGEN {
  idImagen      Int           @id @default(autoincrement())
  urlImagen     String
  fechaSubida   DateTime      @default(now()) @db.Timestamptz(6)
  idCuidador    Int
  idAsset       String?
  idPublicImage String?
  formato       String?
  DESCRIPCION   DESCRIPCION[]
  GROUNDTRUTH   GROUNDTRUTH[]
  PUNTAJE       PUNTAJE[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model PUNTAJE {
  idPuntaje         Int         @id @default(autoincrement())
  idDescripcion     Int
  idPaciente        Int
  idImagen          Int
  rateOmision       Float
  rateComision      Float
  rateExactitud     Float
  puntajeCoherencia Float
  puntajeFluidez    Float
  puntajeTotal      Float
  fechaCalculo      DateTime    @default(now()) @db.Timestamptz(6)
  DESCRIPCION       DESCRIPCION @relation(fields: [idDescripcion], references: [idDescripcion], onDelete: Cascade, onUpdate: NoAction)
  IMAGEN            IMAGEN      @relation(fields: [idImagen], references: [idImagen], onDelete: Cascade, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model SESION {
  idSesion          Int           @id @default(autoincrement())
  idPaciente        Int
  fechaInicio       DateTime      @default(now()) @db.Timestamptz(6)
  estado            estado_sesion @default(en_curso)
  sessionRecall     Float
  sessionComision   Float
  sessionCoherencia Float
  sessionTotal      Float
  DESCRIPCION       DESCRIPCION[]
}

enum estado_sesion {
  en_curso
  pendiente
  completado
}
